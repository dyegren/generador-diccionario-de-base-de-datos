<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Bootstrap 101 Template</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/5.0.0-alpha1/js/bootstrap.min.js" integrity="sha384-oesi62hOLfzrys4LxRF63OJCXdXDipiYWBnvTl9Y9/TRlw5xlKIEHpNyvvDShgf/" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script>
        /*
Librería DevBrary
Fecha de inicio: 15/05/2020

Lista de categorías:

TEST     = Debug y utilidades para
DOM      = Manejo de DOM - HTML
URL      = Manejo de Urls
STR      = Manejo de string
FEC      = Manejo de fechas
ARR      = Manejo de Arrays
IS       = Tipo de variable

*/

        /*Test*/

        function dev_test_echo(texto,valor=false,delimitador=':'){
            if(!valor){
                console.log(texto);
            }else{
                console.log(`${texto} ${delimitador} ${valor}`);
            }

        }

        function dev_test_var_dom_dump(idObjeto){
            let id = dev_is_string(idObjeto)? idObjeto : null;
            if(dev_dom_existe_elemento(idObjeto)){
                echo('Objeto: ');
                echo($(id));
                echo('Id   : '+$(id).attr('id'));

                if(!dev_str_esta_vacio($(id).prop('name'))){
                    echo('Name : '+$(id).prop('name'));
                }

                if(!dev_str_esta_vacio($(id).val())){
                    echo('Value: '+$(id).val());
                }

                if(!dev_str_esta_vacio($(id).text())){
                    echo('Text : '+($(id).text()).trim());
                }

                if(!dev_str_esta_vacio($(id).attr('css'))){
                    echo('Css  : '+$(id).attr('css'));
                }

                if(!dev_str_esta_vacio($(id).attr('class'))){
                    echo('Class: '+$(id).attr('class'));
                }

                if(!dev_str_esta_vacio($(id).attr('style'))){
                    echo('Style: '+$(id).attr('class'));
                }
            }else{
                echo('El elemento "'+id+'" no existe en el DOM.');
            }
        }

        function dev_test_contador_texto_para_pruebas(texto='Prueba',reiniciar=false) {
            if( typeof dev_test_contador_texto_para_pruebas.counter == 'undefined' || reiniciar == true ) {
                dev_test_contador_texto_para_pruebas.counter = 0;
            }
            dev_test_contador_texto_para_pruebas.counter++;
            echo(texto+': '+dev_test_contador_texto_para_pruebas.counter);
        }

        function dev_test_contador_automatico(valor=false) {
            if( typeof dev_test_contador_automatico.counter == 'undefined' || valor===0) {
                dev_test_contador_automatico.counter = 0;
            }
            dev_test_contador_automatico.counter++;
            return dev_test_contador_automatico.counter;
        }

        function dev_test_es_tipo_de_dato(dato,tipo) {
            tipo = tipo.toLowerCase();
            switch (tipo) {
                case 'numero':
                case 'número':
                case 'num':
                case 'numeric':
                    tipo = 'number'
                    break;
                case 'bool':
                case 'boolean':
                case 'booleano':
                    tipo = 'boolean'
                    break;
                case 'string':
                case 'texto':
                case 'alfanumerico':
                    tipo = 'string'
                    break;
                case 'undefined':
                    tipo = 'undefined'
                    break;
            }

            if(dev_test_var_dump(dato,false,true) == tipo){
                return true;
            }

            if((typeof dato === 'string' || dato instanceof String) && typeof dato === tipo){
                return true;
            }else if (typeof dato === tipo){
                return true;
            }else{
                return false;
            }
        }

        function dev_test_var_dump(dato,imprimir=true,retornar=false) {
            let tipoDato = typeof dato;
            let valorDato = dato;
            switch (tipoDato) {
                case 'number':
                    if (Number.isSafeInteger(valorDato)) {
                        tipoDato = 'int';
                    } else {
                        tipoDato = 'float';
                    }
                    if(imprimir) echo(tipoDato + '(' + valorDato + ')');
                    if(retornar) return tipoDato;
                    break;
                case 'string':
                    if(imprimir) echo(tipoDato + '(' + valorDato.length + ') "' + valorDato + '"');
                    if(retornar) return 'string';
                    break;
                case 'object':
                    if (Array.isArray(valorDato)) {
                        tipoDato = 'array';
                        if(imprimir) echo(`${tipoDato} (${valorDato.length}) "${valorDato}"`);
                        if(retornar) return 'array';
                    }else if(valorDato == null){
                        if(imprimir) echo('NULL');
                        if(retornar) return 'null';
                    }else if(dev_dom_existe_elemento($(dato).attr('id'))){
                        dev_test_var_dom_dump($(dato).attr('id'));
                    }else if(dato !== undefined && dato !== null && dato.constructor == Object){
                        if(imprimir) echo('Objeto de tipo JSON');
                        if(imprimir) echo(dato);
                        if(retornar) return 'json';
                    }else if(typeof $(dato).html === 'function' && $(dato).html()){
                        if(imprimir) echo('Objeto DOM');
                        if(imprimir) echo(dato);
                        if(retornar) return 'dom';
                    }else{
                        if(imprimir) echo('Objeto no reconocido.');
                        if(retornar) return 'Objeto no reconocido';
                    }
                    break;
                case 'boolean':
                    if(imprimir) echo(tipoDato + ' "' + valorDato + '"');
                    if(retornar) return 'boolean';
                    break;
                case 'undefined':
                    if(imprimir) echo('La variable no está definida. (undefined)');
                    if(retornar) return 'undefined';
                    break;
            }
        }

        function dev_test_tipo_dato(dato) {
            let tipoDato = typeof dato;
            let valorDato = dato;
            switch (tipoDato) {
                case 'number':
                    if (Number.isSafeInteger(valorDato)) {
                        tipoDato = 'int';
                    } else {
                        tipoDato = 'float';
                    }
                    return tipoDato;
                case 'string':
                    return 'string';
                case 'object':
                    if (Array.isArray(valorDato)) {
                        return 'array';
                    }else if(valorDato == null){
                        return 'null';
                    }else if(dev_dom_existe_elemento($(dato).attr('id'))){
                        return 'dom';
                    }else if(dato !== undefined && dato !== null && dato.constructor == Object){
                        return 'json';
                    }else{
                        return 'Objeto no reconocido';
                    }
                case 'boolean':
                    return 'boolean';
                case 'undefined':
                    return 'undefined';
            }
        }

        function dev_test_depurar(condicion=false,obj=false) {
            if(condicion){
                dev_test_var_dump(obj);
            }
        }

        function dev_test_obj_to_bool(obj) {
            return !!obj
        }

        /*STR*/

        function dev_str_quitar_espacios_blancos(texto) {
            return dev_is_string(texto)?(texto.replace(/\s/g,"")):'';
        }

        function dev_str_sin_caracteres_especiales(texto,quitarTodos=true){
            if(dev_is_string(texto)){
                //Aquí añades las letras que no quieres que se usen
                let vocalesNoPermitidas    = ['á','é','í','ó','ú','ñ'];

                //Aquí añades las letras que quieres que se usen
                let vocalesPermitidas      = ['a','e','i','o','u','ni'];

                //Aquí añades los caracteres que no quieres que se usen
                let caracteresNoPermitidos = ['?','\"','\''];

                texto = (texto.toString()).toLowerCase();
                for(let i=0; i<vocalesNoPermitidas.length;i++){
                    texto = texto.replace(dev_str_reg_crear_expresion(vocalesNoPermitidas[i]), vocalesPermitidas[i]);
                    //texto = texto.replace(vocalesNoPermitidas[i], vocalesPermitidas[i]);
                }

                for(let i=0; i<caracteresNoPermitidos.length;i++){
                    texto = texto.replace(caracteresNoPermitidos[i], '_');
                }

                //Esta parte reemplaza los espacios en blanco " " y los guiones "-" por guiones bajos "_"
                texto = texto.replace(/(\s+|\-+|\_\_)+/g,"_");

                if(quitarTodos){
                    texto = dev_str_reemplazar_expresion_regular(texto,'\\W','');
                }

            }
            return texto;
        }

        function dev_str_quitar_espacios_extra(texto){
            if(texto!='' && texto != null){
                texto = texto.trim();
                texto = texto.replace(/\s\s+/g, ' ');
                texto = texto.replace(/\s\s/g, '');
            }else{
                texto = '';
            }
            return texto;
        }

        function dev_str_conseguir_numero_string (texto,returnArray=false){
            if(dev_is_numero(texto)){
                return texto;
            }else if (dev_is_string(texto)){
                let numero =  texto.match(/\d+/g);

                //Se valida si es es un array, hay caso (como el segundo) donde no sale un número directamente sino un array
                numero = Array.isArray(numero)  && !returnArray ? numero.join('') : numero;
                return numero;
            }

            return false;
        }

        function dev_str_separador_unidad_mil(numero,delimitador='.'){
            numero              = numero.toString();
            let filtered_number = numero.replace(/[^0-9]/gi, '');
            let length          = filtered_number.length;
            let breakpoint      = 1;
            let formated_number = '';

            for(i = 1; i <= length; i++){
                if(breakpoint > 3){
                    breakpoint = 1;
                    formated_number = delimitador + formated_number;
                }
                formated_number = filtered_number.substring(length - i, length - (i - 1)) + formated_number;

                breakpoint++;
            }

            return formated_number;
        }

        function dev_str_esta_vacio(texto){
            texto = dev_str_convertir_a_sting(texto);
            return !(texto !== undefined && texto!== null && texto.length > 0 && texto !== '')
        }

        function dev_str_reemplazar_expresion_regular(t,expresion,reemplazo) {
            expresion = dev_str_reg_corregir_expresion(expresion);
            if(dev_is_string(t) && dev_str_reg_incluye(t,expresion)){
                let re = dev_str_reg_crear_expresion(expresion);
                return t.replace(re,reemplazo);
            }

            return t;
        }

        function dev_str_convertir_a_sting(t) {
            if(!dev_test_es_tipo_de_dato(t,'string')){
                switch (dev_test_tipo_dato(t)){
                    case 'int':
                    case 'boolean':
                    case 'float':
                        t = String(t);
                        break;
                    case 'null':
                    case 'undefined':
                    default:
                        t= '';
                        break;
                }
            }
            return t;
        }

        function dev_str_incluye(t,busqueda) {
            return dev_is_string(t)?t.includes(busqueda):'';
        }

        function dev_str_reg_incluye(t,expresion) {
            let expreg = dev_str_reg_crear_expresion(expresion);
            return dev_is_string(t)?expreg.test(t):false;
        }

        function dev_str_reg_corregir_expresion(expresion){
            return (dev_str_inicia_con(expresion,'/') && dev_str_termina_con(expresion,'/')) ?
                expresion.substring(1,expresion.length-1) :
                /*AGREGAR FALTA G*/
                expresion
        }

        function dev_str_reg_crear_expresion(expresion,flag='g') {
            return new RegExp(expresion,flag)
        }

        function dev_str_primera_letra_mayuscula(texto){
            return texto.charAt(0).toUpperCase() + (texto.slice(1)).toLocaleLowerCase();
        }

        function dev_str_contar_caracteres(t) {
            return (dev_is_string(t))? t.length : 0
        }

        function dev_str_inicia_con(t,busqueda) {
            return dev_is_string(t)? t.startsWith(busqueda) : false;
        }

        function dev_str_termina_con(t,busqueda) {
            return dev_is_string(t)? t.endsWith(busqueda) : false;
        }

        function dev_str_to_lower(t) {
            return dev_is_string(t,1) ?
                t.toLocaleLowerCase() :
                false;
        }

        function dev_str_to_upper(t) {
            return dev_is_string(t,1) ?
                t.toUpperCase() :
                false;
        }

        function dev_str_conseguir_expresion_regular(t,expresion) {
            expresion = dev_str_reg_corregir_expresion(expresion)
            if( dev_str_reg_incluye(t,expresion) ){
                t = t.match(expresion)
                if(t.length>1){
                    //FALTA FOR ARRAY
                }
                return t[0]
            }
            return false;
        }
        function dev_str_capitalizar(t) {
            return t.toLowerCase().replace( /\b./g, function(a){ return a.toUpperCase(); } );
        }

        /*FORM*/

        function dev_form_email(t) {
            return ( (/\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+/.test(t)) && dev_str_quitar_espacios_blancos(t) == t);
        }

        function dev_form_url(t,validarExistencia=false) {
            let re = /(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/;
            return (!validarExistencia) ?
                re.test(t) && dev_str_quitar_espacios_blancos(t) === t :
                re.test(t) && dev_url_pagina_existe(t) && dev_str_quitar_espacios_blancos(t) === t
        }

        function dev_form_text_area(idObjeto,longitud=0) {
            return dev_is_string((dev_dom_obj_value(idObjeto)), longitud)
        }

        function dev_form_radio_box(idObjeto) {
            return dev_test_obj_to_bool($(dev_dom_objeto(idObjeto)).is(":checked"))
        }

        function dev_form_select(idSelect) {
            return dev_test_obj_to_bool(dev_dom_obj_value(idSelect))
        }

        function dev_form_input_string(idSelect,longitud=0) {
            return dev_is_string(dev_dom_obj_value(idSelect),longitud)
        }

        function dev_form_input_numero(idSelect) {
            return dev_is_numero(dev_dom_obj_value(idSelect))
        }

        function dev_str_acortar_texto(t,cantidadCaracteres) {
            if(dev_is_string(t,1)){
                return (dev_is_string(t,cantidadCaracteres)) ? dev_str_substring(t,0,cantidadCaracteres)+'...' : t;
            }
            return '';
        }

        function dev_str_substring(t,inicio, fin) {
            if(dev_is_string(t,1) && dev_is_numero(inicio) && dev_is_numero(fin)){
                if(fin<0){
                    return t.substring(inicio, (t.length + fin) )
                }
                return t.substring(inicio,fin)
            }
            return false;
        }

        function dev_str_sin_caracteres_especiales(texto,quitarTodos=true){
            if(dev_is_string(texto)){
                //Aquí añades las letras que no quieres que se usen
                let vocalesNoPermitidas    = ['á','é','í','ó','ú','ñ'];

                //Aquí añades las letras que quieres que se usen
                let vocalesPermitidas      = ['a','e','i','o','u','ni'];

                //Aquí añades los caracteres que no quieres que se usen
                let caracteresNoPermitidos = ['?','\"','\''];

                texto = (texto.toString()).toLowerCase();
                for(let i=0; i<vocalesNoPermitidas.length;i++){
                    texto = texto.replace(dev_str_reg_crear_expresion(vocalesNoPermitidas[i]), vocalesPermitidas[i]);
                    //texto = texto.replace(vocalesNoPermitidas[i], vocalesPermitidas[i]);
                }

                for(let i=0; i<caracteresNoPermitidos.length;i++){
                    texto = texto.replace(caracteresNoPermitidos[i], '_');
                }

                //Esta parte reemplaza los espacios en blanco " " y los guiones "-" por guiones bajos "_"
                texto = texto.replace(/(\s+|\-+|\_\_)+/g,"_");

                if(quitarTodos){
                    texto = dev_str_reemplazar_expresion_regular(texto,'\\W','');
                }

            }
            return texto;
        }


        /*IS*/

        function dev_is_string(t,longitud=0) {
            return (!dev_str_esta_vacio(t) && t.length>=longitud);
        }

        function dev_is_numero(obj) {
            return dev_test_es_tipo_de_dato(obj,'numero');
        }

        function dev_is_bool(obj) {
            return dev_test_es_tipo_de_dato(obj,'bool');
        }

        function dev_is_undefined(obj) {
            return dev_test_es_tipo_de_dato(obj,'undefined');
        }

        function dev_is_array(obj,tamanio=0) {
            return (dev_test_tipo_dato(obj)==='array' && obj.length>=tamanio);
        }

        /*FECHA*/

        function dev_fec_fecha_actual() {
            let f     = new Date();
            let fecha = `${f.getDay()}/${f.getDate()}/${f.getFullYear()}`;
            return fecha;
        }

        function dev_fec_fecha_actual_texto() {
            var meses      = new Array ("Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre");
            var diasSemana = new Array("Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado");
            var f          = new Date();
            let fecha = `${diasSemana[f.getDay()]} ${f.getDate()} de ${meses[f.getMonth()]} de ${f.getFullYear()}`;
            return fecha;
        }

        /*URL*/

        function dev_url_decode(t){
            return decodeURIComponent(t)
        }

        function dev_url_encode(t){
            return encodeURIComponent(t)
        }

        function dev_url_get_host(url) {
            if(dev_form_url(url)){
                let link = dev_url_string_a_url(url);
                return link.hostname;
            }
            return false;
        }

        function dev_url_pagina_existe(url) {
            try {
                let xhr = new XMLHttpRequest();
                xhr.open('GET', url, false);
                xhr.send();
                return (xhr.status == 200)
            } catch(err) {
                return(false);
            }
        }

        function dev_url_string_a_url(url) {
            let link = document.createElement('a');
            link.href = url;
            return link;
        }

        function dev_url_abrir_enlace(url,target='') {
            url = dev_str_quitar_espacios_blancos(url);
            return window.open(url, target);
        }

        function dev_url_this_host() {
            return window.location.host
        }

        function dev_url_this_pagina_actual() {
            return window.location.pathname
        }

        /*DOM*/

        function dev_dom_agregar_bootstrap(versionBootstrap='4.4.1',versionJquery='3.4.1',versionPopper='1.16.0') {
            dev_dom_agregar_css(`https://maxcdn.bootstrapcdn.com/bootstrap/${versionBootstrap}/css/bootstrap.min.css`,'bootstrap-css');
            dev_dom_agregar_js(`https://ajax.googleapis.com/ajax/libs/jquery/${versionJquery}/jquery.min.js`,'jquery-js');
            dev_dom_agregar_js(`https://cdnjs.cloudflare.com/ajax/libs/popper.js/${versionPopper}/umd/popper.min.js`,'popper-js');
            dev_dom_agregar_js(`https://maxcdn.bootstrapcdn.com/bootstrap/${versionBootstrap}/js/bootstrap.min.js`,'bootstrap-js');
        }


    function dev_dom_agregar_css(url,titulo='') {
    url = dev_form_url(url) ? url : dev_url_this_host()+url
    if(dev_form_url(url) && dev_url_pagina_existe(url)){
    titulo = dev_is_string(titulo,1) ?
    titulo:
    dev_url_get_host(url);
    $('head').append(`<link id="${titulo}" rel="stylesheet" href="${url}">`);
    return true;
    }
    return false;
    }

    function dev_dom_existe_elemento (idObjeto){
    idObjeto = dev_str_quitar_espacios_extra(idObjeto)

    if(dev_is_string(idObjeto,1)){
    if(dev_dom_es_etiqueta_html(idObjeto)){
    if(($(idObjeto).length>0)){
    return true;
    }
    }

    idObjeto = dev_dom_str_a_id(idObjeto)

    if(!dev_str_esta_vacio($(idObjeto).parent().html()) || $(idObjeto).parent().html()){
    return true;
    }
    }
    return false;
    }

    function dev_dom_obj_attr(idObjeto,attr,valor=false) {
    idObjeto         = dev_dom_str_a_id(idObjeto)
    let asignarValor = dev_test_obj_to_bool(valor)

    if (dev_dom_existe_elemento(id) && dev_is_string(attr,1)){
    switch (attr) {
    case "value":
    case "val":
    if(!asignarValor){
    return $(id).val()
    }else{
    $(id).val(valor)
    }
    break;
    case "id":
    if(!asignarValor){
    return $(id).attr('id')
    }else{
    $(id).attr('id',valor)
    }
    break;
    case "name":
    if(!asignarValor){
    return $(id).attr('name')
    }else{
    $(id).attr('name',valor)
    }
    break;
    case "class":
    if(!asignarValor){
    return $(id).attr('class');
    }else{
    $(id).attr('class',valor)
    }
    break;
    case "html":
    if(!asignarValor){
    return $(id).html()
    }else{
    $(id).html(valor)
    }
    break;
    case "text":
    if(!asignarValor){
    return  $(id).text()
    }else{
    $(id).text(valor)
    }
    break;
    default:
    if(!asignarValor){
    return $(id).attr(attr,valor)
    }else{
    $(id).attr(attr,valor)
    }
    }
    }
    }

    function dev_dom_obj_value(idObjeto,valor=null) {
    return dev_dom_obj_attr(t_trim(idObjeto)) ?
    dev_dom_obj_attr(idObjeto,'value',valor) :
    false
    }

    function dev_dom_obj_class(idObjeto,valor='') {
    return dev_dom_existe_elemento(t_trim(idObjeto)) ?
    dev_dom_obj_attr(idObjeto,'class',valor) :
    false
    }

    function dev_dom_obj_html(idObjeto,valor='') {
    return dev_dom_existe_elemento(t_trim(idObjeto)) ?
    dev_dom_obj_attr(idObjeto,'html',valor) :
    false
    }

    function dev_dom_obj_text(idObjeto,valor='') {
    return dev_dom_existe_elemento(t_trim(idObjeto)) ?
    dev_dom_obj_attr(idObjeto,'text',valor) :
    false
    }

    function dev_dom_objeto(idObjeto,buscarTodo=false) {
    if(dev_is_string(idObjeto)){
    idObjeto = t_trim(idObjeto);
    let id = idObjeto.startsWith('#')?idObjeto:'#'+idObjeto;

    if(!dev_str_esta_vacio($(id).attr('id'))){
    if (buscarTodo){
    return $(id);
    }else{
    return $(id)[0];
    }
    }
    }
    return false;
    }

    function dev_dom_copiar_en_portapapeles(dato) {
    let $temp = $("<textarea>");
    $("body").append($temp);
    $temp.val(dato).select();
    document.execCommand("copy");
    $temp.remove();
}

function dev_dom_crear_elemento(etiqueta,contenido,idElementoPadre='body',id='',clase='',name='',arrayAtributosTitulo=null,arrayAtributosValores=null) {
    idElementoPadre = dev_dom_str_a_id(idElementoPadre);
    if (dev_dom_existe_elemento(idElementoPadre)){
        let attr = (dev_is_array(arrayAtributosTitulo,1) && dev_is_array(arrayAtributosValores,1)) ?
            dev_dom_generar_string_atributos(arrayAtributosTitulo,arrayAtributosValores) :
            null;
        $(idElementoPadre).append(`<${etiqueta} id="${id}" class="${clase}" name="${name}" ${attr}>${contenido}</${etiqueta}>`);
    return true;
    }
    return false;
    }

    function dev_dom_generar_string_atributos(arrayAtributosTitulo,arrayAtributosValores) {
    if (dev_is_array(arrayAtributosTitulo,1) && dev_is_array(arrayAtributosValores,1)){
    var attr = '';
    for(let i=0;i<arrayAtributosTitulo.length;i++){
    attr += arrayAtributosTitulo[i]+'="'+arrayAtributosValores[i]+'" ';
    }
    return attr;
    }
    return false
    }

    function dev_dom_obj_find(idElementoPadre,busqueda) {
    if (dev_is_string(idElementoPadre,1) && dev_is_string(busqueda,1)){
    idElementoPadre = dev_dom_str_a_id(idElementoPadre);
    if(dev_dom_existe_elemento(idElementoPadre)){
    busqueda = dev_dom_str_a_id(busqueda);
    return $(idElementoPadre).find(busqueda);
    }
    }
    return false;
    }

    function dev_dom_es_etiqueta_html(t) {
    let array = ['a','abbr','address','area','article','aside','audio','b','base','bdi','bdo','blockquote',
    'body','br','button','canvas','caption','cite','code','col','colgroup','colgroup','command',
    'datalist','dd','del','details','dfn','dialog','div','dl','dt','em','embed','fieldset','figcaption',
    'figure','figure','footer','form','h1','h6','head','header','hgroup','hr','html','i','iframe','img',
    'input','ins','kbd','keygen','label','input','legend','fieldset','figure','details','li','link','map',
    'mark','menu','meta','meter','nav','noscript','objet','ol','optgroup','option','output','p','param',
    'pre','progress','q','rp','rt','ruby','s','samp','script','section','select','small','source','span',
    'strong','style','sub','summary','details','sup','table','tbody','td','textarea','tfoot','th','thead',
    'time','title','tr','track','ul','var','video','wbr'];
    return (dev_is_string(t,1) && dev_arr_incluye_texto(array,t));
    }

    function dev_dom_texto_existe_en_pagina(t) {
    return (dev_is_string(t,1) && dev_str_incluye( dev_dom_obj_html('body') ,t)) ?
    dev_str_incluye( dev_dom_obj_html('body') ,t) :
    false;
    }

    function dev_dom_copiar_en_portapapeles_attr_elemento(id,attr='value') {
    id   = dev_dom_str_a_id(id);
    attr = dev_str_to_lower(dev_str_quitar_espacios_blancos(attr));
    let valor;
    if (dev_dom_existe_elemento(id) && dev_is_string(attr,1)){
    switch (attr) {
    case "value":
    case "val":
    case "v":
    valor = $(id).val();
    break;
    case "id":
    case "i":
    valor = $(id).attr('id');
    break;
    case "name":
    case "n":
    valor = $(id).attr('name');
    break;
    case "class":
    case "c":
    valor = $(id).attr('class');
    break;
    case "html":
    case "h":
    valor = $(id).html();
    break;
    case "text":
    case "t":
    valor = $(id).text();
    break;
    default:
    return false;
    }
    dev_dom_copiar_en_portapapeles(valor);
    return true;
    }
    return false;
    }

    function dev_dom_str_a_id(id) {
    id = dev_str_quitar_espacios_extra(id);
    if (dev_is_string(id)){
    id = dev_dom_es_etiqueta_html(id) || dev_str_inicia_con(id,'#') || dev_str_inicia_con(id,'.') ?
    dev_str_quitar_espacios_extra((id) ):
    dev_str_quitar_espacios_extra(('#'+id));
    return id;
    }
    return '';
    }

    function dev_dom_str_a_unidad_de_medida(t) {
    t = dev_str_convertir_a_sting(t);
    let arrayUnidades = ['px','%','vh','rem','em'];

    for (let i=0; i<arrayUnidades.length;i++){
    if (dev_str_termina_con(t,arrayUnidades[i])){
    return arrayUnidades[i];
    }
    }

    t = dev_str_conseguir_numero_string(t);
    return (dev_is_numero(t)) ? t+'px': false;
    }

    function dev_dom_cambiar_width_heigth(idElemento, width=null, height = null, minWidth = null, minHeight = null) {
    idElemento = dev_dom_str_a_id(idElemento);
    if(dev_dom_existe_elemento(idElemento)){
    let estilosArray       = [width, height, minWidth, minHeight];
    let estilosTituloArray = ['width', 'height', 'min-width', 'min-height'];
    let atributos          = '';

    for (let i=0;i<4;i++){
    if(estilosArray[i] && (dev_is_numero(estilosArray[i]) || dev_is_numero(dev_str_conseguir_numero_string(estilosArray[i]))) ){
    estilosArray[i] = dev_str_quitar_espacios_blancos(dev_str_to_lower(dev_str_convertir_a_sting(estilosArray[i])));
    estilosArray[i] = dev_dom_str_a_unidad_de_medida(estilosArray[i]);

    }else {
    estilosArray[i] = false;
    }

    }

    for (let i=0;i<4;i++){
    if(estilosArray[i]){
    atributos = estilosTituloArray[i]+':'+estilosArray[i]+' ';
    }
    }
    return dev_dom_style_agregar(idElemento,atributos);
    }

    return false;
    }


    function dev_dom_style_agregar(idElemento,atributos,reemplazar=false) {
    idElemento = dev_dom_str_a_id(idElemento);
    if(dev_dom_existe_elemento(idElemento)){
    let estilos = !reemplazar ? dev_dom_obj_attr(idElemento,'style') : ''
    dev_dom_obj_attr(idElemento,'style',estilos+atributos)
    return true;
    }
    return false;
    }

    function dev_dom_crear_iframe(url,idElementoPadre='body',id='iframe',clases='',width='',height='',arrayAtributosTitulo=null,arrayAtributosValores=null) {
    idElementoPadre = dev_dom_str_a_id(idElementoPadre);

    if(dev_form_url(url) && dev_url_pagina_existe(url) && dev_dom_existe_elemento(idElementoPadre)){
    width  = dev_dom_str_a_unidad_de_medida(width);
    width  = width  ? width  : '';

    height = dev_dom_str_a_unidad_de_medida(height);
    height = height ? height : '';

    let arrayTituloValor = dev_dom_generar_array_titulo_valor(dev_arr_unir_arrays(['src','width','height'],arrayAtributosTitulo),dev_arr_unir_arrays([url,width,height], arrayAtributosValores));

    return dev_dom_crear_elemento('iframe','',idElementoPadre,id,clases,'',arrayTituloValor[0],arrayTituloValor[1]);
    }

    return false;
    }

    function dev_dom_generar_array_titulo_valor(arrayAtributosTitulo,arrayAtributosValores) {
    if(dev_is_array(arrayAtributosTitulo) && dev_is_array(arrayAtributosValores)){
    let arrayTituloValor = new Array(2);
    let arrayTitulo      = [];
    let arrayValores     = [];
    let j                = 0;

    for (let i=0; i<arrayAtributosTitulo.length; i++){
    if(dev_is_string(dev_str_convertir_a_sting(arrayAtributosTitulo  [i]),1) &&
    dev_is_string(dev_str_convertir_a_sting(arrayAtributosValores[i]),1) ){
    arrayTitulo .push(arrayAtributosTitulo [i]);
    arrayValores.push(arrayAtributosValores[i]);
    j++;
    }
    }

    if (j>0){
    arrayTituloValor[0] = arrayTitulo;
    arrayTituloValor[1] = arrayValores;
    return arrayTituloValor;
    }
    return false;
    }else
    if( dev_is_string(dev_str_convertir_a_sting(arrayAtributosTitulo), 1) &&
    dev_is_string(dev_str_convertir_a_sting(arrayAtributosValores),1) ){

    arrayTituloValor[0] = arrayAtributosTitulo;
    arrayTituloValor[1] = arrayAtributosValores;
    return arrayTituloValor;
    }
    return false;
    }

    function dev_dom_crear_elemento_con_string(etiqueta,contenido='',idElementoPadre='body',atributos='',cerrado=true) {
    let elemento = `<${etiqueta} ${atributos}>${contenido}`;
    elemento    += (cerrado) ? `</${etiqueta}>` : '';
return dev_dom_agregar_html(elemento,idElementoPadre);
}

function dev_dom_crear_elemento_personalizado(etiqueta,contenido='',idElementoPadre='body',id='',clases='',arrayAtributosTitulo=null,arrayAtributosValores=null,etiquetaCerrada=true) {
idElementoPadre = dev_dom_str_a_id(idElementoPadre);
if(dev_is_string(etiqueta,1) && dev_dom_existe_elemento(idElementoPadre)){
let atributos = dev_dom_generar_string_atributos(arrayAtributosTitulo.push('class'),arrayAtributosValores.push(clases));
let elemento  = `<${etiqueta} id="${id}" ${atributos}>${contenido}`;
elemento      = (etiquetaCerrada) ? elemento+`</${etiqueta}>` : elemento ;
return dev_dom_agregar_html(elemento,idElementoPadre);
}
return false;
}

function dev_dom_generar_texto_de_html(etiqueta,contenido='',id='',clases='',arrayAtributosTitulo=null,arrayAtributosValores=null,etiquetaCerrada=true) {
if(dev_is_string(etiqueta,1)){
let atributos = dev_dom_generar_string_atributos(arrayAtributosTitulo.push('class'),arrayAtributosValores.push(clases));
let elemento  = `<${etiqueta} id="${id}" ${atributos}>${contenido}`;
return(etiquetaCerrada) ? elemento+`</${etiqueta}>` : elemento ;
}
return false;
}

function dev_dom_agregar_html(textoHtml,idElementoPadre,alFinal=true) {
idElementoPadre = dev_dom_str_a_id(idElementoPadre);
if (dev_dom_existe_elemento(idElementoPadre) && dev_str_reg_incluye(textoHtml,/(<)(.|\n)+(>)$/)){
if (alFinal){
$(idElementoPadre).append(textoHtml);
}else {
$(idElementoPadre).prepend(textoHtml);
}
return true;
}
return false;
}

function dev_dom_agregar_jquery(version='1.3.1',etiquetaPadre='head',logCargado=false) {
//etiquetaPadre = dev_dom_es_etiqueta_html(etiquetaPadre) ? etiquetaPadre : 'head';
// agregamos archivo-ltr.css o archivo-rtl.css
let script = document.createElement( "script" );
script.type = "text/javascript";
script.src = `https://ajax.googleapis.com/ajax/libs/jquery/${version}/jquery.min.js`;
if(logCargado){
script.onload = function () {
echo('JQuery '+version+' ha sido cargado correctamente');
};
}

document.getElementsByTagName(etiquetaPadre)[0].appendChild(script);
}

function dev_dom_get_js(url) {
if(dev_form_url(url)){
$.getScript( url, function( data, textStatus, jqxhr ) {
echo( "Script cargado")
}).fail(function(error) {
echo( "Script error" ,error)
})
}

}

function dev_dom_convertir_html_a_jpg(idElemento,nombreArchivo='screenshot-'+dev_str_sin_caracteres_especiales(dev_fec_fecha_actual()),mostrarLogCargado){
dev_dom_get_js( "https://www.linkeapy.ga/assets/js/htmltocanvas.js")
dev_dom_get_js( "https://www.linkeapy.ga/assets/js/filesaver.js")

idElemento = dev_dom_str_a_id(idElemento);
html2canvas($(idElemento), {
onrendered: function(canvas) {
theCanvas = canvas;
canvas.toBlob(function(blob) {
saveAs(blob, nombreArchivo+".jpg");
});
}
});
}

function dev_dom_agregar_js_a_iframe(id,script, scriptId='script-iframe') {
id = dev_dom_str_a_id(id)
var $iframes = $(id);
$iframes.each(function () {
var thisDoc = this.contentWindow.document;
if ( ! thisDoc.getElementById(scriptID)) {
var scriptObj = thisDoc.createElement("script");
scriptObj.type = "text/javascript";
scriptObj.id = scriptId;
scriptObj.innerHTML = script;
thisDoc.body.appendChild(scriptObj);
}
});
}

function dev_dom_class_replace(idElemento,classBuscar,classReemplazar='') {
idElemento = dev_dom_str_a_id(idElemento)
if (dev_dom_existe_elemento(idElemento)){
$(idElemento).removeClass(classBuscar).addClass(classReemplazar)
return true
}
return false;
}

function dev_dom_class_toogle(idElemento,classBuscar,classReemplazar='') {
idElemento = dev_dom_str_a_id(idElemento)
if (dev_dom_existe_elemento(idElemento)){
$(idElemento).toggleClass(classBuscar)
$(idElemento).toggleClass(classReemplazar)
return true
}
return false;
}

function dev_dom_scroll_top(velocidadMS = 500){
$("html, body").animate({scrollTop: 0}, 500);
}

/*Array*/

function dev_arr_unir_arrays(array1,array2) {
let result;
if (dev_is_array(array1) && dev_is_array(array2)){
result = array1.concat(array2);
}else if(dev_is_array(array1)){
result = array1;
}else if(dev_is_array(array2)){
result = array2;
}else{
result = false;
}
return result;
}

function dev_arr_incluye_texto(array,t,logitudTexto=1) {
if(dev_is_array(array) && dev_is_string(t,logitudTexto)){
return array.includes(t);
}
return false;
}

/*HELP*/

function dev_01_help(nombreDeFuncion=''){
echo('Aquí puedes escribir el nombre de la función para saber cómo funciona');
}

/*HTML*/

function dev_html_permitir_caracteres_input( permitidos,caracteresExtra='', elEvento = event) {
//Se usa con onkeypress
// onkeypress="return dev_html_permitir_caracteres_input('num')"
// onkeypress="return dev_html_permitir_caracteres_input('car')"
// onkeypress="return dev_html_permitir_caracteres_input('num_car')"
// Variables que definen los caracteres permitidos
let numeros            = "0123456789"+caracteresExtra;
let caracteres         = " abcdefghijklmnñopqrstuvwxyzABCDEFGHIJKLMNÑOPQRSTUVWXYZáéíóúÁÉÍÓÚ"+caracteresExtra;
let numeros_caracteres = numeros + caracteres;
let teclas_especiales  = [8, 37, 39, 46];
// 8 = BackSpace, 46 = Supr, 37 = flecha izquierda, 39 = flecha derecha


// Seleccionar los caracteres a partir del parámetro de la función
switch(permitidos) {
case 'num':
case 'numero':
case 'numeros':
permitidos = numeros;
break;
case 'car':
case 'caracteres':
case 'letras':
case 'texto':
permitidos = caracteres;
break;
case 'num_car':
case 'alfanumerico':
case 'letrasnumeros':
case 'numerosyletras':
permitidos = numeros_caracteres;
break;
}

// Obtener la tecla pulsada
var evento = elEvento || window.event;
var codigoCaracter = evento.charCode || evento.keyCode;
var caracter = String.fromCharCode(codigoCaracter);

// Comprobar si la tecla pulsada es alguna de las teclas especiales
// (teclas de borrado y flechas horizontales)
var tecla_especial = false;
for(var i in teclas_especiales) {
if(codigoCaracter == teclas_especiales[i]) {
tecla_especial = true;
break;
}
}

// Comprobar si la tecla pulsada se encuentra en los caracteres permitidos
// o si es una tecla especial
return permitidos.indexOf(caracter) != -1 || tecla_especial;
}

function dev_html_limitar_input(cantidadCaracteres,evento=event) {
let elemento  = (evento.srcElement);
let unicode   = evento.keyCode? evento.keyCode : evento.charCode;
let contenido = dev_str_convertir_a_sting($(elemento).val());

// Permitimos las siguientes teclas:
// 8 backspace
// 46 suprimir
// 13 enter
// 9 tabulador
// 37 izquierda
// 39 derecha
// 38 subir
// 40 bajar

if(unicode==8 || unicode==46 || unicode==13 || unicode==9 || unicode==37 || unicode==39 || unicode==38 || unicode==40){
return true;
}

// Si ha superado el limite de caracteres devolvemos false
return (!contenido.length>=cantidadCaracteres);
}

function dev_html_no_permitir_espacios_input(evento=event) {
let elemento   = (evento.srcElement);
let unicode    = evento.keyCode? evento.keyCode : evento.charCode;
let contenido  = dev_str_convertir_a_sting($(elemento).val());
if(unicode==9 || unicode==20 || unicode==13){
return false;
}
}


function dev_html_input_text(cantidadCaracteres=false,conEspacios=true,evento=event) {
cantidadCaracteres = !(cantidadCaracteres) ? (cantidadCaracteres).length : cantidadCaracteres;
let limitar        = dev_html_limitar_input(cantidadCaracteres,evento);
let espacios       = (conEspacios) ? dev_html_no_permitir_espacios_input(evento) : true;

return limitar && espacios;
}

/*LLAMADA DE FUNCION MÁS BREVE*/

function echo (texto,valor=false){
dev_test_echo(texto,valor);
}
function var_dump (texto){
dev_test_var_dump(texto);
}
function var_dom_dump (texto){
dev_test_var_dom_dump(texto);
}
function t_trim(t) {
return dev_str_quitar_espacios_extra(t);
}

</script>
    <style id="dev-css-main">
        textarea{
            max-height: 500px;
        }
    </style>
</head>
<body class="p-2">
<form id="FormularioSQL" onsubmit="return generarDiccionario()" class="form row justify-content-center">
    <div class="text-center col-12 col-sm-9 col-xl-9">
        <div class="form-group">
            <label for="tabla"><h3>Ingrese el nombre de la tabla</h3></label>
            <div class="input-group">
                <input type="text"  id="tabla" value="usuarios" class="form-control w-75" aria-label="Text input with dropdown button">
                <select class="custom-select dropdown-item" id="genero">
                    <option value="la" selected>la</option>
                    <option value="el">el</option>
                    <option value="los">los</option>
                    <option value="las">las</option>
                </select>
            </div>
        </div>
        <div class="form-group">
            <label for="sql"><h3>Ingrese los atributos <br>"CREATE TABLE"</h3></label>
            <textarea class="form-control" name="" id="sql" cols="30" rows="10">
    id_usuario               INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    id_tipo_usuario          INT NOT NULL,
    id_det_usuario           INT NOT NULL,
    nombre                   VARCHAR(50),
    user                     VARCHAR(50),
    email                    VARCHAR(50),
    pass                     VARCHAR(50),
    pais                     VARCHAR(50),
    direccion                VARCHAR(50),
    telefono                 VARCHAR(15),
    cedula                   VARCHAR(15),
    fecha_insercion_usuarios TIMESTAMP DEFAULT NOW(),
    FOREIGN KEY (id_tipo_usuario) REFERENCES tipo_usuarios (id_tipo_usuario),
    FOREIGN KEY (id_det_usuario) REFERENCES det_usuarios (id_det_usuario)
</textarea>
        </div>
        <div class="form-group">
            <button type="submit" class="btn btn-primary">Generar</button>
        </div>
    </div>
</form>

<div class="row text-center mb-5" id="Resultados">
    <div class="col-12">
        <h3>Resultados</h3>
    </div>
    <div id="Campo" class="col-3">
        <h4>Campo</h4>
        <textarea class="form-control w-100" name="" id="CampoTexto" cols="30" rows="10"></textarea>
    </div>

    <div id="Tamanio" class="col-3">
        <h4>Tamaño</h4>
        <textarea class="form-control w-100" name="" id="TamanioTexto" cols="30" rows="10"></textarea>
    </div>
    <div id="Tipo" class="col-3">
        <h4>Tipo</h4>
        <textarea class="form-control w-100" name="" id="TipoTexto" cols="30" rows="10"></textarea>
    </div>
    <div id="Descripcion" class="col-3">
        <h4>Descripción</h4>
        <textarea class="form-control w-100" name="" id="DescripcionTexto" cols="30" rows="10"></textarea>
    </div>
    <div id="Claves" class="col-6">
        <h4>Campos Claves</h4>
        <textarea class="form-control w-100" name="" id="ClavesTexto" cols="30" rows="10"></textarea>
    </div>
    <div id="Relaciones" class="col-6">
        <h4>Relaciones</h4>
        <textarea class="form-control w-100" name="" id="RelacionesTexto" cols="30" rows="10"></textarea>
    </div>
</div>

</body>

<script>
    function sc_alert(texto,valor,delimitador=' : ') {
        if(!valor){
            alert(texto);
        }else{
            alert(`${texto} ${delimitador} ${valor}`);
        }

    }
    function generarDiccionario() {
        const REG_NUM_PAR   = "\\([\\s\\d]+\\)([\\s,]+)?"
        let valorSQL        = ($('#sql').val()).split('\n')
        let tabla           = $('#tabla').val()

        /*Campos para resultados finales*/
        var campoResul      = '',
            tipoResul       = '',
            tamanioResul    = '',
            descripcionResul= '',
            claveResult     = '',
            relacionesResult= '',
            arrayRelaResult = [];
        /*contadores para cambios de descripción foreign key*/
        var i = 0,
            j = 0;


        for(let linea of valorSQL){
            /*Validación de que no sea una línea vacía*/
            if(dev_is_string(dev_str_reemplazar_expresion_regular(linea,'\\s+',' '),5)){
                let lineaConUnEspacio = dev_str_quitar_espacios_extra(linea)
                let lineaArray        = lineaConUnEspacio.split(/[\s]/)
                let tipo              = '',
                    tamanio           = ''

                /*------------MANEJO DE VARIABLES-----------*/

                /* Tamaño y tipo de dato */
                if(dev_str_reg_incluye(lineaArray[1],REG_NUM_PAR) || dev_str_reg_incluye(lineaArray[2],REG_NUM_PAR)){
                    tamanio = dev_str_reg_incluye(lineaArray[1],REG_NUM_PAR) ?
                        dev_str_conseguir_numero_string(lineaArray[1]) :
                        dev_str_conseguir_numero_string(lineaArray[2])
                    tipo    = dev_str_reemplazar_expresion_regular(lineaArray[1],REG_NUM_PAR,'')
                }else{
                    tipo    = lineaArray[1]
                }

                /* foreign key */
                let lineaMin = linea.toLocaleLowerCase()

                if(!lineaMin.includes('foreign key')){
                    campoResul       += lineaArray[0]+'\n'
                    tipoResul        += tipo+'\n'
                    tamanioResul     += tamanio+'\n'
                }

                if(linea.includes('primary key') || linea.includes('PRIMARY KEY')){
                    descripcionResul += lineaArray[0]+' es la clave primaria de la tabla '+tabla+'\n'
                    claveResult += lineaArray[0]+', '
                }else if(linea.includes('id') && (linea.includes('NOT NULL') || linea.includes('not null'))  && (!linea.includes('foreign key') || !linea.includes('FOREIGN KEY'))){
                    descripcionResul += lineaArray[0]+' está relacionado con la tabla COMPLETAR'+(i++)+'\n'
                }else if(linea.includes('FOREIGN KEY') || linea.includes('foreign key')){
                    claveResult         += lineaArray[2]+', '
                    let partesForeign    = linea.split(')')
                    let referencia       = dev_str_reemplazar_expresion_regular(partesForeign[1],/(\s)+?(REFERENCES|references)[\s]+?/)
                    partesForeign        = referencia.split('(')
                    relacionesResult    += ((lineaArray[2]+' se relaciona con la tabla '+partesForeign[0]+'\n').replace('undefined','')).replace(/[\(\)]/g,'')
                    arrayRelaResult[j++] = partesForeign[0].replace('undefined','')
                }else{
                    descripcionResul += 'Es '+$('#genero').val()+' '+dev_str_reemplazar_expresion_regular(lineaArray[0],'_',' ')+' del '+dev_str_reemplazar_expresion_regular(dev_str_primera_letra_mayuscula(tabla.substring(0,(tabla).length-1)),'_',' ')+'\n'
                }

            }

        }

        /*------------CORRECCIÓN FINAL DE CAMPOS------------*/

        /* Limpieza de titulo */
        lineaArray[0]         = dev_str_reemplazar_expresion_regular(lineaArray[0],'[\\\'\\"\\`]+','')

        /* Inclusión de tablas relacionadas en descripción */
        for(let i=0;i<arrayRelaResult.length;i++){
            descripcionResul = dev_str_reemplazar_expresion_regular(descripcionResul,'COMPLETAR'+i,arrayRelaResult[i])
        }

        /* UpperCase para la tabla de tipo de dato*/
        tipoResul = tipoResul.toUpperCase()

        /*---TEST: RESULTADOS FINALES---*/
        var_dump(campoResul)
        var_dump(tipoResul)
        var_dump(tamanioResul)
        var_dump(descripcionResul)
        var_dump(arrayRelaResult)


        /*------------ASIGNACION DE RESULTADOS------------*/
        $('#CampoTexto').val(campoResul)
        $('#TipoTexto').val(tipoResul)
        $('#TamanioTexto').val(tamanioResul)
        $('#DescripcionTexto').val(descripcionResul)
        $('#RelacionesTexto').val(relacionesResult)
        $('#ClavesTexto').val(claveResult.substring(0,(claveResult).length-2).replace(/[\(\)]/g,''))
        return false;
    }

    $('#Resultados textarea').click(function (index) {
        let obj = index.currentTarget
        dev_dom_copiar_en_portapapeles_attr_elemento($(obj).attr('id'),'val')
    })
</script>
</html>



